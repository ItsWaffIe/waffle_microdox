#pragma once

#ifdef OLED_DRIVER_ENABLE
oled_rotation_t oled_init_user(oled_rotation_t rotation) {
  if (is_keyboard_master())
    return OLED_ROTATION_180;
  return rotation;
}

void render_prompt(void) {
  bool blink = (timer_read() % 1000) < 500;

  if (layer_state_is(_LOWER)) {
      oled_write_ln_P(blink ? PSTR("> lo_") : PSTR("> lo"), false);
    } else if (layer_state_is(_RAISE)) {
      oled_write_ln_P(blink ? PSTR("> hi_") : PSTR("> hi"), false);
    } else if (layer_state_is(_ADJUST)) {
      oled_write_ln_P(blink ? PSTR("> adj_") : PSTR("> adj"), false);
    } else {
      oled_write_ln_P(blink ? PSTR("> _ ") : PSTR(">   "), false);
    }
};

void render_logo(void) {
  static const char PROGMEM my_logo[] = {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0,
    0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc4, 0xca, 0xc4, 0x80, 0x00, 0x00, 0x00, 0x10, 0x10,
    0x6c, 0x10, 0x10, 0x00, 0x00, 0x00, 0x00, 0x30, 0x30, 0xcc, 0xcc, 0x30, 0x30, 0x00, 0x00, 0x00,
    0xc0, 0x40, 0x40, 0xc0, 0x80, 0xfe, 0xff, 0x01, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 0x00, 0x40,
    0x04, 0x00, 0xe0, 0xf4, 0x10, 0x10, 0x20, 0x50, 0x80, 0x80, 0x81, 0xff, 0x7e, 0x20, 0x10, 0x10,
    0xf0, 0xe0, 0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0xc0, 0x00, 0x00, 0x00,
    0x01, 0x03, 0x06, 0x0c, 0x99, 0xfb, 0xff, 0x80, 0x00, 0x04, 0x20, 0x01, 0x00, 0x10, 0x00, 0x02,
    0x00, 0x3e, 0x7f, 0x41, 0x80, 0x00, 0x08, 0x6c, 0x40, 0x40, 0x60, 0x48, 0x40, 0x68, 0x0c, 0x80,
    0x41, 0x7f, 0x3e, 0x00, 0x00, 0x00, 0x00, 0x80, 0x40, 0x83, 0x03, 0x0c, 0x0c, 0x03, 0x03, 0x00,
    0x00, 0x00, 0x00, 0x07, 0x0f, 0x0c, 0x0c, 0x06, 0x03, 0x01, 0x07, 0x05, 0x05, 0x07, 0x03, 0x03,
    0x03, 0x03, 0x03, 0x03, 0x03, 0x07, 0x05, 0x05, 0x07, 0x01, 0x03, 0x05, 0x05, 0x03, 0x01, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  };
  oled_write_raw_P(my_logo, sizeof(my_logo));
}

void render_status_main(void) {

    render_prompt();

    render_logo();
}

void oled_task_user(void) {
  if (is_keyboard_master()) {
    render_status_main();
  } else {
    oled_scroll_left();
  }
}

#endif
